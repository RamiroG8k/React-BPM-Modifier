{"version":3,"sources":["services/index.js","components/Slider.jsx","util/index.js","App.js","index.js"],"names":["apiInstance","Axios","create","baseURL","headers","interceptors","request","use","a","config","sessionStorage","getItem","token","Authorization","error","Promise","reject","ReactRange","onChange","disabled","Handle","Slider","min","max","defaultValue","handle","props","value","dragging","index","restProps","prefixCls","overlay","visible","placement","handleStyle","height","width","marginTop","backgroundColor","border","railStyle","borderRadius","trackStyle","background","getOfflineBPM","file","callback","reader","FileReader","context","window","OfflineAudioContext","webkitOfflineAudioContext","onload","decodeAudioData","result","buffer","source","createBufferSource","lowpass","createBiquadFilter","type","frequency","Q","connect","highpass","destination","start","startRendering","oncomplete","e","renderedBuffer","inferences","peaks","groups","forEach","peak","i","group","tempo","position","count","Math","round","some","interval","push","length","getIntervals","data","partSize","parts","j","volume","abs","sort","b","splice","getPeaks","getChannelData","intA","intB","readAsArrayBuffer","formatSeconds","s","classNames","classes","filter","Boolean","join","App","search","useLocation","queryString","parse","id","useState","track","setTrack","isPlaying","setIsPlaying","rate","setRate","bpm","setBpm","duration","setDuration","currentTime","setCurrentTime","loop","setLoop","master","setMaster","half","setHalf","audioRef","useRef","useEffect","setItem","fetchTrack","get","then","response","fetchFeatures","catch","console","log","info","artists","map","name","src","preview_url","img","album","images","url","className","alt","Object","keys","onClick","current","preservesPitch","playbackRate","audio","compute","target","pause","play","onTimeUpdate","onCanPlay","preload","ref","accept","files","URL","createObjectURL","ReactDOM","render","StrictMode","path","component","to","document","getElementById"],"mappings":"wPAEaA,E,OAAcC,EAAMC,OAC7B,CACIC,QAAS,6BACTC,QAAS,CACL,OAAU,mBACV,eAAgB,sBAK5BJ,EAAYK,aAAaC,QAAQC,IAAjC,+BAAAC,EAAA,MACI,WAAMC,GAAN,eAAAD,EAAA,sEACwBE,eAAeC,QAAQ,SAD/C,cACUC,EADV,UAGQH,EAAOL,QAAQS,cAAgBD,GAHvC,kBAKWH,GALX,2CADJ,uDAQI,SAAAK,GAAW,OAAOC,QAAQC,OAAOF,M,kECGtBG,EApBI,SAAC,GAA4B,IAA1BC,EAAyB,EAAzBA,SAAUC,EAAe,EAAfA,SACpBC,EAAWC,IAAXD,OAYR,OACI,cAAC,IAAD,CAAQD,SAAUA,EAAUG,IAAK,GAAIC,IAAK,IAAKC,aAAc,IAAKC,OAXvD,SAAAC,GACX,IAAQC,EAAyCD,EAAzCC,MAAOC,EAAkCF,EAAlCE,SAAUC,EAAwBH,EAAxBG,MAAUC,EAAnC,YAAiDJ,EAAjD,GACA,OACI,cAAC,IAAD,CAA2BK,UAAU,oBACjCC,QAAO,UAAKL,EAAL,MAAgBM,QAASL,EAAUM,UAAU,MADxD,SAEI,cAACd,EAAD,aAAQO,MAAOA,GAAWG,KAFVD,IAQ0DX,SAAUA,EAC5FiB,YAAa,CAAEC,OAAQ,GAAIC,MAAO,GAAIC,WAAY,EAAGC,gBAAiB,UAAWC,OAAQ,GACzFC,UAAW,CAAEL,OAAQ,EAAGM,aAAc,IAAMC,WAAY,CAAEC,WAAY,WCnBjEC,EAAgB,SAACC,EAAMC,GAChC,IAAMC,EAAS,IAAIC,WAGbC,EAAU,IADOC,OAAOC,qBAAuBD,OAAOE,2BACzB,EAAG,OAAY,OAElDL,EAAOM,OAAS,WACZJ,EAAQK,gBAAgBP,EAAOQ,QAAQ,SAACC,GAEpC,IAAIC,EAASR,EAAQS,qBACrBD,EAAOD,OAASA,EAMhB,IAAIG,EAAUV,EAAQW,qBACtBD,EAAQE,KAAO,UACfF,EAAQG,UAAUpC,MAAQ,IAC1BiC,EAAQI,EAAErC,MAAQ,EAGlB+B,EAAOO,QAAQL,GAGf,IAAIM,EAAWhB,EAAQW,qBACvBK,EAASJ,KAAO,WAChBI,EAASH,UAAUpC,MAAQ,IAC3BuC,EAASF,EAAErC,MAAQ,EAGnBiC,EAAQK,QAAQC,GAGhBA,EAASD,QAAQf,EAAQiB,aAGzBT,EAAOU,MAAM,GACblB,EAAQmB,oBAGZnB,EAAQoB,WAAa,SAACC,GAClB,IAAMd,EAASc,EAAEC,eAIXC,EA+DX,SAAsBC,GAUzB,IAAIC,EAAS,GAwBb,OAtBAD,EAAME,SAAQ,SAACC,EAAMhD,GACjB,IAD4B,IAAD,WAClBiD,GAML,IALA,IAAIC,EAAQ,CACRC,MAAQ,QAAeN,EAAM7C,EAAQiD,GAAGG,SAAWJ,EAAKI,UACxDC,MAAO,GAGJH,EAAMC,MAAQ,IACjBD,EAAMC,OAAS,EAGnB,KAAOD,EAAMC,MAAQ,KACjBD,EAAMC,OAAS,EAGnBD,EAAMC,MAAQG,KAAKC,MAAML,EAAMC,OAEzBL,EAAOU,MAAK,SAACC,GAAD,OAAeA,EAASN,QAAUD,EAAMC,MAAQM,EAASJ,QAAU,MACjFP,EAAOY,KAAKR,IAjBXD,EAAI,EAAIjD,EAAQiD,EAAKJ,EAAMc,QAAUV,EAAI,GAAIA,IAAM,EAAnDA,MAqBNH,EAnGcc,CAalB,SAAkBC,GAsBrB,IAJA,IAAIC,EAAW,MACXC,EAAQF,EAAK,GAAGF,OAASG,EACzBjB,EAAQ,GAEHI,EAAI,EAAGA,EAAIc,EAAOd,IAAK,CAE5B,IADA,IAAIvD,EAAM,EACDsE,EAAIf,EAAIa,EAAUE,GAAKf,EAAI,GAAKa,EAAUE,IAAK,CACpD,IAAIC,EAASX,KAAK5D,IAAI4D,KAAKY,IAAIL,EAAK,GAAGG,IAAKV,KAAKY,IAAIL,EAAK,GAAGG,OACxDtE,GAAQuE,EAASvE,EAAIuE,UACtBvE,EAAM,CACF0D,SAAUY,EACVC,OAAQA,IAIpBpB,EAAMa,KAAKhE,GAgBf,OAZAmD,EAAMsB,MAAK,SAAUxF,EAAGyF,GACpB,OAAOA,EAAEH,OAAStF,EAAEsF,WAIxBpB,EAAQA,EAAMwB,OAAO,EAAkB,GAAfxB,EAAMc,SAGxBQ,MAAK,SAAUxF,EAAGyF,GACpB,OAAOzF,EAAEyE,SAAWgB,EAAEhB,YAGnBP,EA/DeyB,CAAS,CAAC1C,EAAO2C,eAAe,GAAI3C,EAAO2C,eAAe,MAG9CJ,MAAK,SAACK,EAAMC,GAClC,OAAOA,EAAKpB,MAAQmB,EAAKnB,SAC1BgB,OAAO,EAAG,GAEbnD,EAAS0B,KAIjBzB,EAAOuD,kBAAkBzD,IA4FtB,IAAM0D,EAAgB,SAACC,GAAQ,OAAQA,GAAKA,GAAK,KAAO,IAAM,EAAIA,EAAI,IAAM,QAAWA,GAEjFC,EAAa,sCAAIC,EAAJ,yBAAIA,EAAJ,uBAAgBA,EAAQC,OAAOC,SAASC,KAAK,M,QCsExDC,EAhNH,WAAO,IAAD,MACNC,EAAWC,cAAXD,OACR,EAAsBE,IAAYC,MAAMH,GAAhCpG,EAAR,EAAQA,MAAOwG,EAAf,EAAeA,GACf,EAA0BC,mBAAS,IAAnC,mBAAOC,EAAP,KAAcC,EAAd,KACA,EAAkCF,oBAAS,GAA3C,mBAAOG,EAAP,KAAkBC,EAAlB,KACA,EAAwBJ,mBAAS,KAAjC,mBAAOK,EAAP,KAAaC,EAAb,KACA,EAAsBN,mBAAS,GAA/B,mBAAOO,EAAP,KAAYC,EAAZ,KACA,EAAgCR,mBAAS,GAAzC,mBAAOS,EAAP,KAAiBC,EAAjB,KACA,EAAsCV,mBAAS,GAA/C,mBAAOW,EAAP,KAAoBC,EAApB,KACA,EAAwBZ,oBAAS,GAAjC,mBAAOa,EAAP,KAAaC,EAAb,KACA,EAA4Bd,oBAAS,GAArC,mBAAOe,EAAP,KAAeC,EAAf,KACA,EAAwBhB,oBAAS,GAAjC,oBAAOiB,GAAP,MAAaC,GAAb,MAEMC,GAAWC,mBAEjBC,qBAAU,WACF9H,GAASwG,IACT1G,eAAeiI,QAAQ,QAAS/H,GAChCgI,QAEL,CAAChI,EAAOwG,IAEX,IAAMwB,GAAU,uCAAG,sBAAApI,EAAA,sEACTR,EAAY6I,IAAZ,kBAA2BzB,IAC5B0B,MAAK,YAAyB,IAAhBC,EAAe,EAArBrD,KAELsD,GAAcD,MACfE,MAAMC,QAAQC,KALN,2CAAH,qDAQVH,GAAa,uCAAG,WAAOI,GAAP,SAAA5I,EAAA,sEACZR,EAAY6I,IAAZ,0BAAmCzB,IACpC0B,MAAK,YAAyB,IAAD,IAAfC,EAAe,EAArBrD,KACCA,EAAI,2BAAQ0D,GAASL,GACrBM,EAAO,oBAAGD,EAAKC,eAAR,aAAG,EAAcC,KAAI,SAAC9I,GAAD,OAAOA,EAAE+I,QAAMzC,KAAK,aAAzC,QAAkD,GACzD9B,EAAQG,KAAKC,MAAMM,EAAKV,OAC9BuC,EAAS,CAAEgC,KAAM7D,EAAK6D,KAAMvE,QAAOqE,UAASG,IAAK9D,EAAK+D,YAAaC,IAAKhE,EAAKiE,MAAMC,OAAO,GAAGC,MAC7FhC,EAAO7C,MACRiE,MAAMC,QAAQC,KARH,2CAAH,sDAyEnB,OACI,uBAAMW,UAAU,sDAAhB,UAEI,sBAAKA,UAAU,oCAAf,UACI,0BAASA,UAAU,uCAAnB,UACI,sBAAKA,UAAU,OAAf,UACI,mBAAGA,UAAU,mCAAb,iBACA,mBAAGA,UAAU,sCAAb,mBAAuDpC,EAAvD,UAEJ,qBAAKoC,UAAU,QAAf,SACI,mBAAGA,UAAU,kCAAb,SAAgDlC,SAIxD,yBAASkC,UAAU,4BAAnB,SACI,sBAAKA,UAAU,iBAAf,UACI,qBAAKA,UAAU,wDAAf,SACI,qBAAKN,IAAG,iBAAElC,QAAF,IAAEA,OAAF,EAAEA,EAAOoC,WAAT,QAAgB,4FAA6FK,IAAI,YAE7H,qBAAKD,UAAU,6FAK1BE,OAAOC,KAAK3C,GAAO9B,OAAS,GACzB,sBAAKsE,UAAU,6CAAf,UAEI,0BAASA,UAAU,cAAnB,UACI,sBAAKA,UAAU,gDAAf,UACI,yBAAQI,QAAS,kBAhDrC/B,GAASD,QAEKM,GAAS2B,QACjBjC,KAAOA,IA6C4C4B,UAAWpD,EAAWwB,EAAO,wBAA0B,yBACxF,oFADJ,UAEI,mBAAG4B,UAAU,WAAb,SAAwB,cAAC,IAAD,MACxB,mBAAGA,UAAU,UAAb,qBAGJ,yBAAQI,QAAS,kBA/CrC7B,GAAWD,QAEGI,GAAS2B,QACjBC,eAAiBhC,IA4CoC0B,UAAWpD,EAAW0B,EAAS,wBAA0B,yBAC5F,oFADJ,UAEI,mBAAG0B,UAAU,WAAb,SAAwB,cAAC,IAAD,MACxB,mBAAGA,UAAU,oBAAb,gCAIR,sBAAKA,UAAU,iCAAf,UACI,qBAAKA,UAAU,QAAf,SACI,oBAAIA,UAAU,oBAAd,0BAAmCxC,QAAnC,IAAmCA,OAAnC,EAAmCA,EAAOiC,YAA1C,QAAkD,8BAEtD,sBAAKO,UAAU,0BAAf,UACI,qBAAKA,UAAU,oBAAf,SACI,oBAAIA,UAAU,sCAAd,0BAAqDxC,QAArD,IAAqDA,OAArD,EAAqDA,EAAO+B,eAA5D,QAAuE,iCAE3E,qBAAKS,UAAU,QAAf,SACI,wBAAQI,QAAS,kBAxD7C3B,IAASD,SAEFT,EAAPS,GAAoB,EAANV,EAAkBA,EAAM,IAsD2BkC,UAAWpD,EAAW4B,GAAO,wBAA0B,yBACxF,iEADJ,SAEI,mBAAGwB,UAAU,yBAAb,+BAOpB,0BAASA,UAAU,mBAAnB,UACI,cAACzI,EAAD,CAAQH,SA/GT,SAACS,GAChBgG,EAAQhG,GACRkG,EAAO1C,KAAKC,MAAOzD,EAAQ,IAAO2F,EAAMtC,QAE1BwD,GAAS2B,QACjBE,aAAe1I,EAAQ,OA2Gb,sBAAKmI,UAAU,uBAAf,UACI,mBAAGA,UAAU,oBAAb,mBACA,mBAAGA,UAAU,oBAAb,yBAIR,0BAASA,UAAU,iDAAnB,UACI,sBAAKA,UAAU,SAAf,UACI,uBAAO5I,SAlGR,SAACqD,GACpB,IAAM+F,EAAQ9B,GAAS2B,QAEnBI,EAAWhG,EAAEiG,OAAO7I,MAAQmG,EAAY,IAC5CG,EAAesC,GACfD,EAAMtC,YAAcuC,GA6FiCzG,KAAK,QAAQnC,MAAOmG,EAA0B,IAAdE,EAAqBF,EAAW,EAC7FgC,UAAU,WACd,sBAAKA,UAAU,uBAAf,UACI,sBAAMA,UAAU,UAAhB,SAA2BtD,EAAcwB,KACzC,sBAAM8B,UAAU,UAAhB,SAA2BtD,EAAcsB,WAIjD,qBAAKgC,UAAU,4BAAf,SACI,wBAAQI,QA7IZ,WAChB,IAAMI,EAAQ9B,GAAS2B,QACvBG,EAAMpC,KAAOA,EACTV,GACAC,GAAa,GACb6C,EAAMG,UAENhD,GAAa,GACb6C,EAAMI,SAqIwCZ,UAAU,mCAAxC,SACI,oBAAGA,UAAU,WAAb,WACMtC,GAAa,cAAC,IAAD,IACdA,GAAa,cAAC,IAAD,iBAOtC,uBAAOmD,aAAc,SAACpG,GAAD,OAAO0D,EAAe1D,EAAEiG,OAAOxC,cAAc4C,UAAW,SAACrG,GAAD,OAAOwD,EAAYxD,EAAEiG,OAAO1C,WACrG+C,QAAQ,OAAOC,IAAKtC,GAAUgB,IAAKlC,EAAMkC,MAEd,IAA9BQ,OAAOC,KAAK3C,GAAO9B,QAChB,qBAAKsE,UAAU,mCAAf,SACI,wBAAOA,UAAU,gGAAjB,UACI,sBAAMA,UAAU,2BAAhB,qBACA,uBACIhG,KAAK,OAAOgG,UAAU,SAASiB,OAAO,UAAU7J,SA3IpD,SAAC,GAAgB,IAC3B4B,EAD0B,EAAb0H,OACCQ,MAAM,GAE1BnI,EAAcC,GAAM,SAACnB,GACjB4F,EAAS,CACLgC,KAAMzG,EAAKyG,KACXvE,MAAOrD,EAAM,GAAGqD,MAChBqE,QAAS,aACTG,IAAKyB,IAAIC,gBAAgBpI,KAE7B+E,EAAOlG,EAAM,GAAGqD,sB,QC1E5BmG,IAASC,OACL,cAAC,IAAMC,WAAP,UACI,cAAC,IAAD,UACI,eAAC,IAAD,WACI,cAAC,IAAD,CAAOC,KAAK,IAAIC,UAAWxE,IAC3B,cAAC,IAAD,CAAUuE,KAAK,MAAME,GAAG,aAKpCC,SAASC,eAAe,W","file":"static/js/main.22d6c4f7.chunk.js","sourcesContent":["import Axios from 'axios';\n\nexport const apiInstance = Axios.create(\n    {\n        baseURL: 'https://api.spotify.com/v1',\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json',\n        }\n    }\n);\n\napiInstance.interceptors.request.use(\n    async config => {\n        const token = await sessionStorage.getItem('token');\n        if (token) {\n            config.headers.Authorization = token;\n        }\n        return config;\n    },\n    error => { return Promise.reject(error); }\n)","import Slider, { SliderTooltip } from 'rc-slider';\nimport 'rc-slider/assets/index.css';\n\nconst ReactRange = ({ onChange, disabled }) => {\n    const { Handle } = Slider;\n\n    const handle = props => {\n        const { value, dragging, index, ...restProps } = props;\n        return (\n            <SliderTooltip key={index} prefixCls=\"rc-slider-tooltip\" \n                overlay={`${value} %`} visible={dragging} placement=\"top\">\n                <Handle value={value} {...restProps} />\n            </SliderTooltip>\n        );\n    };\n\n    return (\n        <Slider disabled={disabled} min={50} max={150} defaultValue={100} handle={handle} onChange={onChange}\n        handleStyle={{ height: 20, width: 20, marginTop: -8, backgroundColor: '#F87171', border: 0 }}\n        railStyle={{ height: 4, borderRadius: 50 }} trackStyle={{ background: 'none' }} />\n    );\n\n};\nexport default ReactRange;","export const getOfflineBPM = (file, callback) => {\n    const reader = new FileReader();\n    // Create offline context\n    const OfflineContext = window.OfflineAudioContext || window.webkitOfflineAudioContext;\n    const context = new OfflineContext(2, 30 * 44100, 44100);\n    \n    reader.onload = () => {\n        context.decodeAudioData(reader.result, (buffer) => {\n            // Create buffer source\n            let source = context.createBufferSource();\n            source.buffer = buffer;\n\n            // Beats, or kicks, generally occur around the 100 to 150 hz range.\n            // Below this is often the bassline.  So let's focus just on that.\n\n            // First a lowpass to remove most of the song.\n            let lowpass = context.createBiquadFilter();\n            lowpass.type = 'lowpass';\n            lowpass.frequency.value = 150;\n            lowpass.Q.value = 1;\n\n            // Run the output of the source through the low pass.\n            source.connect(lowpass);\n\n            // Now a highpass to remove the bassline.\n            let highpass = context.createBiquadFilter();\n            highpass.type = 'highpass';\n            highpass.frequency.value = 100;\n            highpass.Q.value = 1;\n\n            // Run the output of the lowpass through the highpass.\n            lowpass.connect(highpass);\n\n            // Run the output of the highpass through our offline context.\n            highpass.connect(context.destination);\n\n            // Start the source, and render the output into the offline context.\n            source.start(0);\n            context.startRendering();\n        });\n\n        context.oncomplete = (e) => {\n            const buffer = e.renderedBuffer;\n            const peaks = getPeaks([buffer.getChannelData(0), buffer.getChannelData(1)]);\n            let groups = getIntervals(peaks);\n            \n            const inferences = groups.sort((intA, intB) => {\n                return intB.count - intA.count;\n            }).splice(0, 5);\n\n            callback(inferences);            \n        };\n    };\n\n    reader.readAsArrayBuffer(file);\n};\n\nexport function getPeaks(data) {\n\n    // What we're going to do here, is to divide up our audio into parts.\n\n    // We will then identify, for each part, what the loudest sample is in that\n    // part.\n\n    // It's implied that that sample would represent the most likely 'beat'\n    // within that part.\n\n    // Each part is 0.5 seconds long - or 22,050 samples.\n\n    // This will give us 60 'beats' - we will only take the loudest half of\n    // those.\n\n    // This will allow us to ignore breaks, and allow us to address tracks with\n    // a BPM below 120.\n\n    let partSize = 22050,\n        parts = data[0].length / partSize,\n        peaks = [];\n\n    for (let i = 0; i < parts; i++) {\n        let max = 0;\n        for (let j = i * partSize; j < (i + 1) * partSize; j++) {\n            let volume = Math.max(Math.abs(data[0][j]), Math.abs(data[1][j]));\n            if (!max || (volume > max.volume)) {\n                max = {\n                    position: j,\n                    volume: volume\n                };\n            }\n        }\n        peaks.push(max);\n    }\n\n    // Sort the peaks according to volume...\n    peaks.sort(function (a, b) {\n        return b.volume - a.volume;\n    });\n\n    // ...take the loundest half of those...\n    peaks = peaks.splice(0, peaks.length * 0.5);\n\n    // ...and re-sort it back based on position.\n    peaks.sort(function (a, b) {\n        return a.position - b.position;\n    });\n\n    return peaks;\n}\n\nexport function getIntervals(peaks) {\n\n    // What we now do is get all of our peaks, and then measure the distance to\n    // other peaks, to create intervals.  Then based on the distance between\n    // those peaks (the distance of the intervals) we can calculate the BPM of\n    // that particular interval.\n\n    // The interval that is seen the most should have the BPM that corresponds\n    // to the track itself.\n\n    let groups = [];\n\n    peaks.forEach((peak, index) => {\n        for (let i = 1; (index + i) < peaks.length && i < 10; i++) {\n            let group = {\n                tempo: (60 * 44100) / (peaks[index + i].position - peak.position),\n                count: 1\n            };\n\n            while (group.tempo < 90) {\n                group.tempo *= 2;\n            }\n\n            while (group.tempo > 180) {\n                group.tempo /= 2;\n            }\n\n            group.tempo = Math.round(group.tempo);\n\n            if (!(groups.some((interval) => (interval.tempo === group.tempo ? interval.count++ : 0)))) {\n                groups.push(group);\n            }\n        }\n    });\n    return groups;\n}\n\nexport const formatSeconds = (s) => { return (s - (s %= 60)) / 60 + (9 < s ? ':' : ':0') + ~~(s) };\n\nexport const classNames = (...classes) => classes.filter(Boolean).join(' ');\n","// Common\nimport { useEffect, useState, useRef } from 'react';\n// Others\nimport { useLocation } from 'react-router-dom';\nimport queryString from 'query-string';\nimport { apiInstance } from './services';\nimport Slider from './components/Slider';\nimport { getOfflineBPM, formatSeconds, classNames } from './util';\nimport { CgInfinity, CgMusic, CgPlayButtonO, CgPlayPauseO } from 'react-icons/cg'\n\nconst App = () => {\n    const { search } = useLocation();\n    const { token, id } = queryString.parse(search);\n    const [track, setTrack] = useState({});\n    const [isPlaying, setIsPlaying] = useState(false);\n    const [rate, setRate] = useState(100);\n    const [bpm, setBpm] = useState(0);\n    const [duration, setDuration] = useState(0);\n    const [currentTime, setCurrentTime] = useState(0);\n    const [loop, setLoop] = useState(false);\n    const [master, setMaster] = useState(false);\n    const [half, setHalf] = useState(false);\n\n    const audioRef = useRef();\n\n    useEffect(() => {\n        if (token && id) {\n            sessionStorage.setItem('token', token);\n            fetchTrack();\n        }\n    }, [token, id]);\n\n    const fetchTrack = async () => {\n        await apiInstance.get(`/tracks/${id}`)\n            .then(({ data: response }) => {\n                // setTrack(response);\n                fetchFeatures(response);\n            }).catch(console.log);\n    };\n\n    const fetchFeatures = async (info) => {\n        await apiInstance.get(`/audio-features/${id}`)\n            .then(({ data: response }) => {\n                const data = { ...info, ...response };\n                const artists = info.artists?.map((a) => a.name).join(', ') ?? '';\n                const tempo = Math.round(data.tempo);\n                setTrack({ name: data.name, tempo, artists, src: data.preview_url, img: data.album.images[1].url });\n                setBpm(tempo);\n            }).catch(console.log);\n    };\n\n    const toggleMedia = () => {\n        const audio = audioRef.current;\n        audio.loop = loop;\n        if (isPlaying) {\n            setIsPlaying(false);\n            audio.pause();\n        } else {\n            setIsPlaying(true);\n            audio.play();\n        }\n    };\n\n    const handleRate = (value) => {\n        setRate(value);\n        setBpm(Math.round((value / 100) * track.tempo));\n\n        const audio = audioRef.current;\n        audio.playbackRate = value / 100;\n    };\n\n    const fileHandler = ({ target }) => {\n        const file = target.files[0];\n\n        getOfflineBPM(file, (value) => {\n            setTrack({\n                name: file.name,\n                tempo: value[0].tempo,\n                artists: 'No artists',\n                src: URL.createObjectURL(file)\n            });\n            setBpm(value[0].tempo);\n        });\n    };\n\n    const handleProgress = (e) => {\n        const audio = audioRef.current;\n\n        let compute = (e.target.value * duration) / 100;\n        setCurrentTime(compute);\n        audio.currentTime = compute;\n    };\n\n    const toggleLoop = () => {\n        setLoop(!loop);\n\n        const audio = audioRef.current;\n        audio.loop = loop;\n    };\n\n    const toggleMaster = () => {\n        setMaster(!master);\n\n        const audio = audioRef.current;\n        audio.preservesPitch = master;\n    };\n\n    const toggleHalf = () => {\n        setHalf(!half);\n\n        half ? setBpm(bpm * 2) : setBpm(bpm / 2);\n    };\n\n    return (\n        <main className=\"flex flex-col h-screen items-center bg-gray-100 p-5\">\n\n            <div className=\"flex flex-col w-full items-center\">\n                <section className=\"flex w-full sm:w-1/2 justify-between\">\n                    <div className=\"left\">\n                        <p className=\"text-2xl font-bold text-gray-700\">BPM</p>\n                        <p className=\"text-xl font-semibold text-gray-400\">{`${rate}%`}</p>\n                    </div>\n                    <div className=\"right\">\n                        <p className=\"font-bold text-6xl text-red-400\">{bpm}</p>\n                    </div>\n                </section>\n\n                <section className=\"w-full sm:w-1/2 py-5 px-2\">\n                    <div className=\"relative w-4/5\">\n                        <div className=\"z-10 aspect-w-1 aspect-h-1 rounded-lg overflow-hidden\">\n                            <img src={track?.img ?? 'https://static.4shared.com/images/4sh_music_embed_player_default_cover.png?ver=-790556520'} alt=\"Cover\" />\n                        </div>\n                        <div className=\"z-0 absolute top-0 -right-16 sm:-right-32 bg-gray-700 rounded-full w-full h-full\" />\n                    </div>\n                </section>\n            </div>\n\n            {Object.keys(track).length > 0 &&\n                <div className=\"flex flex-col h-1/2 w-full justify-between\">\n\n                    <section className=\"flex w-full\">\n                        <div className=\"flex flex-col p-1 w-1/5 justify-between gap-2\">\n                            <button onClick={() => toggleLoop()} className={classNames(loop ? 'bg-red-300 text-white' : 'bg-white text-gray-700',\n                                'flex flex-col h-full rounded-xl justify-center items-center transition delay-100')}>\n                                <p className=\"text-3xl\"><CgInfinity /></p>\n                                <p className=\"text-sm\">Loop</p>\n                            </button>\n\n                            <button onClick={() => toggleMaster()} className={classNames(master ? 'bg-red-300 text-white' : 'bg-white text-gray-700',\n                                'flex flex-col h-full rounded-xl justify-center items-center transition delay-100')} >\n                                <p className=\"text-2xl\"><CgMusic /></p>\n                                <p className=\"text-xs leading-3\">Master tempo</p>\n                            </button>\n                        </div>\n\n                        <div className=\"flex flex-col h-full w-4/5 p-2\">\n                            <div className=\"h-1/2\">\n                                <h2 className=\"text-xl font-bold\">{track?.name ?? 'Name placeholder etc...'}</h2>\n                            </div>\n                            <div className=\"flex h-1/2 items-center\">\n                                <div className=\"w-4/5 h-full py-2\">\n                                    <h3 className=\"text-sm font-semibold text-gray-600\">{track?.artists ?? 'Artist 1, Artist 2... etc.'}</h3>\n                                </div>\n                                <div className=\"w-1/5\">\n                                    <button onClick={() => toggleHalf()} className={classNames(half ? 'bg-red-300 text-white' : 'bg-white text-gray-700',\n                                        'flex w-full h-auto rounded-xl p-2 justify-center items-center')}>\n                                        <p className=\"text-3xl font-semibold\">½</p>\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n                    </section>\n\n                    <section className=\"w-full py-5 px-2\">\n                        <Slider onChange={handleRate} />\n                        <div className=\"flex justify-between\">\n                            <p className=\"text-sm font-thin\">- 50%</p>\n                            <p className=\"text-sm font-thin\">+ 50%</p>\n                        </div>\n                    </section>\n\n                    <section className=\"flex w-full h-1/3 justify-between items-center\">\n                        <div className=\"w-9/12\">\n                            <input onChange={handleProgress} type=\"range\" value={duration ? (currentTime * 100) / duration : 0}\n                                className=\"w-full\" />\n                            <div className=\"flex justify-between\">\n                                <span className=\"text-xs\">{formatSeconds(currentTime)}</span>\n                                <span className=\"text-xs\">{formatSeconds(duration)}</span>\n                            </div>\n                        </div>\n\n                        <div className=\"flex w-1/5 justify-center\">\n                            <button onClick={toggleMedia} className=\"flex justify-center items-center\">\n                                <p className=\"text-4xl\">\n                                    {!isPlaying && <CgPlayButtonO />}\n                                    {isPlaying && <CgPlayPauseO />}\n                                </p>\n                            </button>\n                        </div>\n                    </section>\n                </div>}\n\n            <audio onTimeUpdate={(e) => setCurrentTime(e.target.currentTime)} onCanPlay={(e) => setDuration(e.target.duration)}\n                preload=\"true\" ref={audioRef} src={track.src}></audio>\n\n            {Object.keys(track).length === 0 &&\n                <div className=\"flex items-center justify-center\">\n                    <label className=\"flex flex-col items-center p-4 bg-gray-200 rounded-2xl tracking-wide uppercase cursor-pointer\">\n                        <span className=\"text-base leading-normal\">Archivo</span>\n                        <input\n                            type=\"file\" className=\"hidden\" accept=\"audio/*\" onChange={fileHandler} />\n                    </label>\n                </div>}\n\n        </main>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { BrowserRouter, Switch, Route, Redirect } from 'react-router-dom';\n// import reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n    <React.StrictMode>\n        <BrowserRouter>\n            <Switch>\n                <Route path=\"/\" component={App} />\n                <Redirect path=\"/**\" to=\"/\" />\n                {/* <App /> */}\n            </Switch>\n        </BrowserRouter>\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}